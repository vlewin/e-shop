%ul#categories.nav.navbar-nav.clearfix
  %li= link_to "All categories", root_path(view: @view), remote: :true
  - @categories.each do |cat|
    %li= link_to "#{cat.name} (#{cat.products_count})", root_path(q: {'category_name_cont' => cat.name}, view: @view), remote: :true

.clearfix
%hr

#store-index
  .row
    .col-xs-5.col-sm-5.col-md-6
      = search_form_for @search, url: root_path, method: :get, remote: true, class: '' do |f|
        = hidden_field_tag :view, params[:view]

        .input-group
          %span.input-group-addon
            %i.fa.fa-search

          = f.text_field :name_cont, placeholder: 'Search', class: 'form-control'

    .col-xs-7.col-sm-7.col-md-6
      .text-right
        %span.hidden-xs
          %small Sort by:
          -# %i.fa.fa-sort-alpha-asc

        .btn-group.btn-group-sm
          .btn.btn-default
            = sort_link @search, :name
            -# %i.fa.fa-sort-alpha-asc
          .btn.btn-default
            = sort_link @search, :price
            -# %i.fa.fa-sort-numeric-desc
          .btn.btn-default
            = sort_link @search, :created_at
            -# %i.fa.fa-sort-amount-desc

        %span.hidden-xs
          %small View as:
        .btn-group
          = icon_link_to '', root_path(view: :grid), { class: 'btn btn-sm btn-default' }, 'fa-lg fa-th-large text-muted'
          = icon_link_to '', root_path(view: :list), { class: 'btn btn-sm btn-default' }, 'fa-lg fa-th-list text-muted'

  %hr

  #products
    = render 'products'

  %hr.line

  = paginate @products, remote: true
