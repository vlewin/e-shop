#store
  .row
    .col-xs-12.col-sm-5.col-md-6
      = search_form_for @search, url: root_path, method: :get, remote: true, class: '' do |f|
        = hidden_field_tag :view, params[:view]

        .input-group
          %span.input-group-addon
            %i.fa.fa-search

          = f.text_field :title_cont, placeholder: _('Search'), class: 'form-control'

    .col-xs-12.hidden-sm.hidden-md.hidden-lg &nbsp;

    .col-xs-12.col-sm-7.col-md-6
      .text-right
        %span.hidden-xs
          %small= _('Sort')
          -# %i.fa.fa-sort-alpha-asc

        .btn-group.btn-group-sm
          .btn.btn-default{ class: (@sorting.include?('title')) ? 'active' : ''}
            = sort_link @search, :title, _('Title')
            -# %i.fa.fa-sort-alpha-asc
          .btn.btn-default{ class: (@sorting.include?('price')) ? 'active' : ''}
            = sort_link @search, :price, _('Price')
            -# %i.fa.fa-sort-numeric-desc
          .btn.btn-default{ class: (@sorting.include?('created_at')) ? 'active' : ''}
            = sort_link @search, :created_at, _('Created at')
            -# %i.fa.fa-sort-amount-desc

        %span.hidden-xs
          %small= _('View')
        .btn-group
          = icon_link_to '', root_path(view: :grid), { class: "btn btn-sm btn-default #{'active' if params[:view] == 'grid'}" }, 'fa-lg fa-th-large text-muted'
          = icon_link_to '', root_path(view: :list), { class: "btn btn-sm btn-default #{'active' if params[:view] == 'list'}" }, 'fa-lg fa-th-list text-muted'

  %hr.line

  .row.hidden-xs
    .col-xs-12.col-sm-12.col-md-12
      #alphabet
        - alphabet = (@current_locale == :ru)? ('А'..'Я') : ('A'..'Z')
        - alphabet.each do |char|
          = link_to char, root_path(q: { title_start: char }), class: @init_letters.include?(char) ? '' : 'disabled',  remote: true

  %hr.line

  %ul.list-group.hidden-sm.hidden-md.hidden-lg
    = link_to _('All categories'), root_path(view: @view), class: params[:category_title_cont].nil? ? 'list-group-item active' : 'list-group-item', remote: :true
    - @categories.each do |cat|
      - title = "#{cat.title} (#{cat.products_count})"
      - path = root_path(q: {'category_title_cont' => cat.title}, view: @view)
      - css_class = cat.title == params[:category_title_cont] ? 'list-group-item active' : 'list-group-item'
      = link_to title, path, class: css_class, "data-toggle" => "tab", 'data-url' => path, remote: :true

  -# %ul#categories.nav.nav-tabs.hidden-sm.hidden-md.hidden-lg
  -#   %li.active.dropdown
  -#     = link_to _('Categories'), '#', class: "dropdown-toggle", 'data-toggle' => "dropdown"
  -#     %ul.dropdown-menu
  -#       %li{ class: params[:category_name_cont].nil? ? 'active' : '' }
  -#         = link_to _('All categories'), root_path(view: @view), remote: :true
  -#       - @categories.each do |cat|
  -#         - name = "#{cat.name} (#{cat.products_count})"
  -#         - path = root_path(q: {'category_name_cont' => cat.name}, view: @view)
  -#         %li{ class: cat.name == params[:category_name_cont] ? 'active' : '' }
  -#           = link_to name, path, "data-toggle" => "tab", 'data-url' => path, remote: :true

  %ul#categories.nav.nav-tabs.hidden-xs
    %li{ class: params[:category_title_cont].nil? ? 'active' : '' }
      = link_to _('All categories'), root_path(view: @view), remote: :true
    - @categories.each do |cat|
      - title = "#{cat.title} (#{cat.products_count})"
      - path = root_path(q: {'category_title_cont' => cat.title}, view: @view)
      %li{ class: cat.title == params[:category_title_cont] ? 'active' : '' }
        = link_to title, path, "data-toggle" => "tab", 'data-url' => path, remote: :true
  .tab-content
    #products.tab-pane.active
      = render 'products'


